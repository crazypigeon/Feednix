language: cpp

compiler: clang

os:
    - linux
    - osx

sudo: required

notifications:
    email:
        recipients:
            - andersd@riseup.net
        on_success: never
        on_failure: always

before_install:
    - if [ $TRAVIS_OS_NAME = linux ]; then sudo apt-get update -qq; fi

install:
    - if [ $TRAVIS_OS_NAME = linux ]; then \
      sudo apt-get install -qq dh-autoreconf libjsoncpp-dev libcurl4-gnutls-dev libncurses5-dev; \
      else brew install jsoncpp; fi

before_script:
    - ./autogen.sh

script:
    - ./configure && make
